import{w as e,b as a,j as t,k as l,g as o,f as r,A as s,x as u,G as d,u as n,e as i,F as c,y as p,K as v,t as m,a as x}from"./vendor-vue-BkEISqGT.js";import{u as g}from"./useModalStack-Dh50zh9q.js";import{u as y,b}from"./main-Bc4UwIiF.js";import{I as k,_ as f,a as h,B as w}from"./select-D12jQZLY.js";import"./apiHelpers-DHex_rN5.js";import"./vendor-utils-BdUT8LFy.js";const j={class:"shrink-0 dark:bg-[#2A2A2A] dark:text-white border border-gray-300 dark:border-gray-500 rounded-xl overflow-hidden mt-4"},V={class:"p-2 border-b border-gray-200 dark:border-b-gray-500"},A={class:"divide-y divide-gray-200 dark:divide-gray-500 max-h-48 overflow-y-auto"},H=["value"],T={class:"truncate text-sm"},_={key:1,class:"px-4 py-8 text-gray-500 text-sm text-center"},M={key:2,class:"px-4 py-8 text-gray-500 text-sm text-center"},C={class:"px-4 py-3 border-t border-gray-200 dark:border-gray-500 dark:bg-[#2A2A2A] dark:text-white"},E={class:"flex gap-2 justify-end"},P={__name:"taskModal",setup(P){const B=y(),U=b(),{openModal:D,activeModal:N,closeModal:S}=g(),F=x("");let I=null;function z(){clearTimeout(I),I=setTimeout(()=>{U.searchProjects(F.value)},300)}e(F,e=>{e||(U.allProjects=[])});const q=x("create"),G=x(null),K=x("#10B981"),L=x(""),O=x(""),J=x(""),Q=x("low"),R=x("pending"),W=x(""),X=[{value:"low",text:"Low"},{value:"medium",text:"Medium"},{value:"high",text:"High"}],Y=[{value:"pending",text:"Pending"},{value:"in_progress",text:"In Progress"},{value:"done",text:"Done"}];async function Z(){if("edit"===q.value&&!G.value?.id)return void show("error","No task selected for editing");const e={title:L.value,description:O.value||"",due_date:J.value||null,priority:Q.value,status:R.value,project_id:W.value||null,color:K.value||"#10B981"};try{("create"===q.value?await B.createTask(e):await B.editTask(G.value.id,e))&&$()}catch(a){show("error",a)}}function $(){B.selectedTaskForModal=null,S()}return e(()=>B.selectedTaskForModal,e=>{e&&(q.value="edit",G.value=e,function(e){L.value=e.title||"",O.value=e.description||"",J.value=e.due_date?new Date(e.due_date).toISOString().split("T")[0]:"",Q.value=e.priority||"",R.value=e.status||"pending",W.value=e.project_id||""}(e),D("task"))}),e(()=>N.value,e=>{"task"===e&&(B.selectedTaskForModal||(q.value="create",G.value=null,L.value="",O.value="",J.value="",Q.value="low",R.value="pending",W.value=""))}),(e,x)=>(a(),t(w,{show:"task"===n(N),title:"create"===q.value?"Create Task":"Edit Task",description:"Add a new task to your project",onClose:$,color:K.value},{footer:l(()=>[r("div",E,[r("button",{class:"cursor-pointer w-full sm:w-auto text-sm sm:text-base px-6 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 active:bg-gray-300 font-medium transition-all",onClick:$}," Cancel "),r("button",{class:"cursor-pointer w-full sm:w-auto text-sm sm:text-base px-6 py-2.5 text-white rounded-lg font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all bg-emerald-500 hover:bg-emerald-600",onClick:Z},m("create"===q.value?"Create":"Update"),1)])]),default:l(()=>[o(k,{modelValue:L.value,"onUpdate:modelValue":x[0]||(x[0]=e=>L.value=e),label:"Task Name",name:"name",type:"text",placeholder:"Enter task name",required:"",colorHex:K.value},null,8,["modelValue","colorHex"]),o(f,{modelValue:O.value,"onUpdate:modelValue":x[1]||(x[1]=e=>O.value=e),label:"Description",name:"description",rows:3,placeholder:"Enter your description...",colorHex:K.value},null,8,["modelValue","colorHex"]),o(k,{modelValue:J.value,"onUpdate:modelValue":x[2]||(x[2]=e=>J.value=e),label:"Due Date",name:"due_date",type:"date",colorHex:K.value},null,8,["modelValue","colorHex"]),o(h,{modelValue:Q.value,"onUpdate:modelValue":x[3]||(x[3]=e=>Q.value=e),label:"Priority",name:"priority",options:X,colorHex:K.value},null,8,["modelValue","colorHex"]),o(h,{modelValue:R.value,"onUpdate:modelValue":x[4]||(x[4]=e=>R.value=e),label:"Status",name:"status",options:Y,colorHex:K.value},null,8,["modelValue","colorHex"]),r("details",j,[x[10]||(x[10]=r("summary",{class:"font-semibold text-sm px-4 py-3 cursor-pointer"},[s(" Add to "),r("span",{class:"text-[#5c2fd1]"},"Project")],-1)),r("div",V,[u(r("input",{type:"text","onUpdate:modelValue":x[5]||(x[5]=e=>F.value=e),onInput:z,placeholder:"Search projects...",class:"dark:text-white w-full px-4 py-2.5 text-sm rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-[#2A2A2A] text-black focus:outline-none focus:ring-2 focus:ring-[#5c2fd1] focus:border-transparent transition"},null,544),[[d,F.value]])]),r("div",A,[n(U).allProjects.length?(a(!0),i(c,{key:0},p(n(U).allProjects,e=>(a(),i("label",{key:e.id,class:"flex items-center px-4 py-3 cursor-pointer hover:bg-gray-200 dark:hover:dark:bg-[#3a3a3a] transition-colors"},[u(r("input",{type:"radio",name:"project_id",value:e.id,"onUpdate:modelValue":x[6]||(x[6]=e=>W.value=e),class:"mr-3 text-[#5c2fd1] focus:ring-[#5c2fd1]"},null,8,H),[[v,W.value]]),r("span",T,m(e.name),1)]))),128)):F.value?(a(),i("div",_,[...x[8]||(x[8]=[r("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),r("p",{class:"font-medium"},"No projects found",-1),r("p",{class:"text-xs mt-1"},"Try a different search term",-1)])])):(a(),i("div",M,[...x[9]||(x[9]=[r("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),r("p",{class:"font-medium"},"No projects yet",-1),r("p",{class:"text-xs mt-1"},"Create your first project below",-1)])]))]),r("div",C,[r("button",{type:"button",onClick:x[7]||(x[7]=e=>n(D)("project")),class:"cursor-pointer w-full px-4 py-2 bg-white dark:bg-[#2A2A2A] border border-[#6B3EEA] text-[#6B3EEA] rounded-lg hover:bg-[#6B3EEA] hover:text-white transition-all text-sm font-medium"}," + New Project ")])])]),_:1},8,["show","title","color"]))}};export{P as default};

import{u as e}from"./main-CvQJh5w7.js";import{_ as a,a as t,b as s}from"./pendingIcon-DRRbCSIY.js";import{D as r,_ as l,a as o}from"./empty-CtbKquiE.js";import{f as i}from"./formatData-Cm_F2oGr.js";import{w as d,x as n,b as u,j as p,e as m,f as c,g as v,h as x,n as f,t as g,q as w,u as y,a as b,c as k}from"./vendor-vue-wzQQ7cRN.js";import"./apiHelpers-R-zApMdV.js";import"./vendor-utils-B8UFEocK.js";import"./toolTip-BkCKVqxH.js";const h={key:2,id:"taskDetailContent",class:"w-full bg-[#ffffff] dark:bg-[#222321] rounded-lg shadow-md p-4 sm:p-6 h-auto min-h-72 sm:min-h-80 flex flex-col gap-4 overflow-hidden"},C={class:"flex items-center gap-2 sm:gap-3 flex-wrap"},j={class:"w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center shrink-0"},_={key:0,class:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center"},T={key:1},D={key:2},N={class:"task-title text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white wrap-break-word overflow-wrap-anywhere"},S={key:0,class:"relative"},U={class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none overflow-hidden"},z={key:1,class:"text-gray-500 dark:text-gray-700 italic text-sm"},A={class:"flex flex-col sm:flex-row gap-3 mb-2 sm:mb-4 flex-wrap"},H={class:"rounded-xl p-3 sm:p-4 flex-1 min-w-55 max-w-full bg-linear-to-br from-[#eeeeee] to-[#fffbfb] dark:from-[#232422] dark:to-[#20232a] border border-gray-200 dark:border-gray-600 transition-all duration-300 hover:bg-gray-50 dark:hover:bg-gray-800 overflow-hidden"},I={class:"space-y-2 text-sm sm:text-base text-gray-600 dark:text-gray-300"},P={class:"flex items-center gap-2 min-w-0"},M={class:"min-w-0 wrap-break-word"},q={class:"flex items-center gap-2 min-w-0"},E={class:"min-w-0 wrap-break-word"},F={class:"font-medium text-gray-900 dark:text-gray-100"},R={class:"flex items-start gap-2 min-w-0"},B={class:"min-w-0 wrap-break-word"},G=["title"],J={class:"rounded-xl p-3 sm:p-4 flex-1 min-w-55 max-w-full bg-linear-to-br from-[#eeeeee] to-[#fffbfb] dark:from-[#232422] dark:to-[#20232a] border border-gray-200 dark:border-gray-600 transition-all duration-300 hover:bg-gray-50 dark:hover:bg-gray-800 overflow-hidden"},K={class:"space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-400"},L={class:"flex items-start gap-2 min-w-0"},O={class:"min-w-0 wrap-break-word"},Q={class:"flex items-start gap-2 min-w-0"},V={class:"min-w-0 wrap-break-word"},W={class:"font-medium text-gray-900 dark:text-gray-100"},X={class:"flex items-start gap-2 min-w-0"},Y={class:"min-w-0 wrap-break-word"},Z={class:"font-medium text-gray-900 dark:text-gray-100"},$={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-wrap"},ee={__name:"TaskDetails",setup(ee){const ae=e();ae.initCacheCleanup();const te=k(()=>ae.selectedTask),se=k(()=>ae.selectedTaskId),re=k(()=>ae.loadingSelectedTask),le=b(!1),oe=b(null),ie=b(!1),de=b(!1),ne=b(!1),ue=k(()=>{if(!te.value?.due_date)return!1;return new Date(te.value.due_date)<new Date&&"done"!==te.value.status}),pe=k(()=>{if(!te.value?.due_date)return!1;const e=new Date(te.value.due_date),a=new Date,t=new Date(a.getTime()+2592e5);return e>=a&&e<=t&&"done"!==te.value.status});const me=()=>{oe.value&&(ie.value=oe.value.scrollHeight>oe.value.clientHeight)},ce=async()=>{if(!ne.value&&te.value){ne.value=!0;try{await ae.updateTaskStatus(te.value.id,"done")}catch(e){}finally{ne.value=!1}}};let ve=null;return d(re,e=>{e?ve=setTimeout(()=>de.value=!0,150):(clearTimeout(ve),de.value=!1)},{immediate:!0}),d(se,e=>{e&&(le.value=!1)}),d(te,e=>{e&&(le.value=!1,n(me))},{deep:!0}),(e,d)=>{return de.value?(u(),p(r,{key:0})):te.value?(u(),m("div",h,[c("div",C,[c("div",j,["done"===te.value.status?(u(),m("span",_,[v(a,{size:20,color:"white"})])):"in_progress"===te.value.status?(u(),m("span",T,[v(t,{size:24})])):"pending"===te.value.status?(u(),m("span",D,[v(s,{size:24})])):x("",!0)]),c("span",{id:"status",class:f(["task-state px-2.5 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm font-medium rounded-full whitespace-nowrap",(n=te.value,n&&{done:"bg-emerald-200 text-emerald-900",pending:"bg-red-200 text-red-800",in_progress:"bg-yellow-200 text-yellow-900"}[n.status]||"")])},g("in_progress"===te.value.status?"In Progress":te.value.status?.charAt(0).toUpperCase()+te.value.status?.slice(1)),3)]),c("h1",N,g(te.value.title??"—"),1),te.value.description?(u(),m("div",S,[c("div",U,[c("p",{ref_key:"descriptionRef",ref:oe,id:"task-description",class:f(["text-gray-700 dark:text-gray-300 leading-relaxed wrap-break-word overflow-wrap-anywhere",{"line-clamp-3":!le.value}])},g(te.value.description),3)]),ie.value||le.value?(u(),m("button",{key:0,onClick:d[0]||(d[0]=e=>le.value=!le.value),id:"toggleDescription",class:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium mt-2 focus:outline-none focus:underline"},g(le.value?"← Show less":"Show more →"),1)):x("",!0)])):(u(),m("div",z," No description provided ")),c("div",A,[c("div",H,[d[8]||(d[8]=c("h3",{class:"text-base sm:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[c("span",{class:"w-1 h-5 bg-emerald-500 rounded-full shrink-0"}),w(" Details ")],-1)),c("ul",I,[c("li",P,[d[3]||(d[3]=c("span",{class:"w-2 h-2 bg-purple-500 rounded-full shrink-0 mt-1.5"},null,-1)),c("span",M,[d[2]||(d[2]=w("Priority: ",-1)),c("span",{class:f(["font-medium",{"text-red-600 dark:text-red-400":"high"===te.value.priority,"text-yellow-800 dark:text-yellow-400":"medium"===te.value.priority}])},g(te.value.priority?te.value.priority.charAt(0).toUpperCase()+te.value.priority.slice(1):"No priority"),3)])]),c("li",q,[d[5]||(d[5]=c("span",{class:"w-2 h-2 bg-blue-500 rounded-full shrink-0 mt-1.5"},null,-1)),c("span",E,[d[4]||(d[4]=w("Type: ",-1)),c("span",F,g(te.value.type?te.value.type.charAt(0).toUpperCase()+te.value.type.slice(1):"No type"),1)])]),c("li",R,[d[7]||(d[7]=c("span",{class:"w-2 h-2 bg-indigo-500 rounded-full shrink-0 mt-1.5"},null,-1)),c("span",B,[d[6]||(d[6]=w("Project: ",-1)),c("span",{class:"font-medium wrap-break-word text-gray-900 dark:text-gray-100",title:te.value.project?.name},g(te.value.project?.name??"No project"),9,G)])])])]),c("div",J,[d[12]||(d[12]=c("h3",{class:"text-base sm:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[c("span",{class:"w-1 h-5 bg-blue-500 rounded-full shrink-0"}),w(" Timeline ")],-1)),c("ul",K,[c("li",L,[c("span",O,[d[9]||(d[9]=w("Due date: ",-1)),c("span",{class:f(["font-medium",{"text-red-600 dark:text-red-400":ue.value,"text-yellow-800 dark:text-yellow-400":pe.value,"text-gray-900 dark:text-gray-100":!ue.value&&!pe.value}])},g(y(i)(te.value.due_date)??"No due date"),3)])]),c("li",Q,[c("span",V,[d[10]||(d[10]=w("Created: ",-1)),c("span",W,g(y(i)(te.value.created_at)??"No created date"),1)])]),c("li",X,[c("span",Y,[d[11]||(d[11]=w("Updated: ",-1)),c("span",Z,g(y(i)(te.value.updated_at)??"No updated date"),1)])])])])]),c("div",$,[te.value&&"done"!==te.value.status?(u(),p(o,{key:0,disabled:ne.value,onClick:ce,type:"submit",bgColor:"bg-emerald-500",hoverColor:"hover:bg-[#04bd7f]",activeColor:"active:bg-[#36bd90]",textColor:"text-white",text:"✓ Mark as Complete",hoverText:"hover:text-gray-200",class:"w-full sm:w-auto"},null,8,["disabled"])):x("",!0),v(o,{onClick:d[1]||(d[1]=e=>function(e){ae.setSelectedTaskForModal(e)}(te.value)),id:"task-edit-btn",bgColor:"bg-gray-200",hoverColor:"hover:bg-gray-100",activeColor:"active:bg-gray-300",textColor:"text-[#0c8059]",text:"Edit Task",class:"w-full sm:w-auto",type:"button"})])])):(u(),p(l,{key:1,type:"task"}));var n}}};export{ee as default};

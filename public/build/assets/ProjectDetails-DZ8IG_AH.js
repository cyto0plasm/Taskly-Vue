import{b as e}from"./main-Bc4UwIiF.js";import{_ as a,a as t,b as s}from"./pendingIcon-B0IGL8Wa.js";import{D as l,_ as r,a as o}from"./empty-BXACGT1W.js";import{f as d}from"./formatData-Cm_F2oGr.js";import{w as i,q as n,b as u,j as c,e as m,f as p,g as v,h as x,n as g,t as f,A as w,F as b,y,u as k,a as h,c as j}from"./vendor-vue-BkEISqGT.js";import"./apiHelpers-DHex_rN5.js";import"./vendor-utils-BdUT8LFy.js";const _={key:2,id:"projectDetailContent",class:"w-full bg-[#ffffff] dark:bg-[#222321] rounded-lg shadow-md p-4 sm:p-6 h-auto min-h-72 sm:min-h-80 flex flex-col gap-4 overflow-hidden"},C={class:"flex items-center gap-2 sm:gap-3 flex-wrap"},D={class:"w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center shrink-0"},P={key:0,class:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center"},z={key:1},N={key:2},S={class:"project-name text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white wrap-break-word overflow-wrap-anywhere"},T={key:0,class:"relative"},H={class:"prose prose-sm sm:prose-base dark:prose-invert max-w-none overflow-hidden"},I={key:1,class:"text-gray-400 dark:text-gray-600 italic text-sm"},A={class:"flex flex-col sm:flex-row gap-3 mb-2 sm:mb-4 flex-wrap"},E={class:"rounded-xl p-3 sm:p-4 flex-1 min-w-55 max-w-full bg-linear-to-br from-[#eeeeee] to-[#fffbfb] dark:from-[#232422] dark:to-[#20232a] border border-gray-200 dark:border-gray-600 transition-all duration-300 hover:bg-gray-50 dark:hover:bg-gray-800 overflow-hidden flex flex-col max-h-50"},F={class:"flex items-center justify-between mb-4"},M={class:"bg-indigo-500 rounded-full px-1 py-0.5 text-center text-white font-medium text-sm"},U={class:"overflow-y-auto flex-1"},q={key:0,class:"space-y-2"},R={key:1,class:"text-gray-400 dark:text-gray-600 italic text-sm"},W={class:"rounded-xl p-3 sm:p-4 flex-1 min-w-55 max-w-full bg-linear-to-br from-[#eeeeee] to-[#fffbfb] dark:from-[#232422] dark:to-[#20232a] border border-gray-200 dark:border-gray-600 transition-all duration-300 hover:bg-gray-50 dark:hover:bg-gray-800 overflow-hidden"},B={class:"space-y-2 text-sm sm:text-base text-gray-600 dark:text-gray-300"},G={class:"flex items-start gap-2 min-w-0"},J={class:"min-w-0 wrap-break-word"},K={class:"flex items-start gap-2 min-w-0"},L={class:"min-w-0 wrap-break-word"},O={class:"flex items-start gap-2 min-w-0 pt-2"},Q={class:"min-w-0 wrap-break-word"},V={class:"font-medium"},X={class:"flex items-start gap-2 min-w-0"},Y={class:"min-w-0 wrap-break-word"},Z={class:"font-medium"},$={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-wrap"},ee={__name:"ProjectDetails",setup(ee){const ae=e(),te=j(()=>ae.selectedProjectWithTasks),se=j(()=>ae.selectedProjectId),le=j(()=>ae.loadingSelectedProject),re=h(!1),oe=h(null),de=h(!1),ie=h(!1),ne=h(!1),ue=j(()=>{if(!te.value?.end_date)return!1;return new Date(te.value.end_date)<new Date&&"done"!==te.value.status}),ce=j(()=>{if(!te.value?.end_date)return!1;const e=new Date(te.value.end_date),a=new Date,t=new Date(a.getTime()+2592e5);return e>=a&&e<=t&&"done"!==te.value.status});const me=()=>{oe.value&&(de.value=oe.value.scrollHeight>oe.value.clientHeight)},pe=async()=>{if(!ne.value&&te.value){ne.value=!0;try{await ae.updateProjectStatus(te.value.id,"done")}catch(e){}finally{ne.value=!1}}};let ve=null;return i(le,e=>{e?ve=setTimeout(()=>ie.value=!0,150):(clearTimeout(ve),ie.value=!1)},{immediate:!0}),i(se,e=>{e&&(re.value=!1)}),i(te,e=>{e&&(re.value=!1,n(me))},{deep:!0}),(e,i)=>{return ie.value?(u(),c(l,{key:0})):te.value?(u(),m("div",_,[p("div",C,[p("div",D,["done"===te.value.status?(u(),m("span",P,[v(a,{size:20,color:"white"})])):"in_progress"===te.value.status?(u(),m("span",z,[v(t,{size:24})])):"pending"===te.value.status?(u(),m("span",N,[v(s,{size:24})])):x("",!0)]),p("span",{id:"status",class:g(["project-state px-2.5 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm font-medium rounded-full whitespace-nowrap",(n=te.value,n&&{done:"bg-emerald-100 text-emerald-800",pending:"bg-red-100 text-red-600",in_progress:"bg-yellow-100 text-yellow-800"}[n.status]||"")])},f("in_progress"===te.value.status?"In Progress":te.value.status?.charAt(0).toUpperCase()+te.value.status?.slice(1)),3)]),p("h1",S,f(te.value.name??"—"),1),te.value.description?(u(),m("div",T,[p("div",H,[p("p",{ref_key:"descriptionRef",ref:oe,id:"project-description",class:g(["text-gray-700 dark:text-gray-300 leading-relaxed wrap-break-word overflow-wrap-anywhere",{"line-clamp-3":!re.value}])},f(te.value.description),3)]),de.value||re.value?(u(),m("button",{key:0,onClick:i[0]||(i[0]=e=>re.value=!re.value),id:"toggleDescription",class:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium mt-2 focus:outline-none focus:underline"},f(re.value?"← Show less":"Show more →"),1)):x("",!0)])):(u(),m("div",I," No description provided ")),p("div",A,[p("div",E,[p("div",F,[i[2]||(i[2]=p("h3",{class:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2 shrink-0"},[p("span",{class:"w-1 h-5 bg-indigo-500 rounded-full shrink-0"}),w(" Tasks assigned ")],-1)),p("span",M,f(te.value.tasks?.length||0),1)]),p("div",U,[te.value.tasks?.length>0?(u(),m("ul",q,[(u(!0),m(b,null,y(te.value.tasks,e=>(u(),m("li",{key:e.id,class:"flex items-center gap-2 text-sm sm:text-base shadow-sm bg-slate-100 hover:bg-slate-200 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg p-1 text-gray-600 dark:text-gray-300"},[p("div",null,["done"==e.status?(u(),c(a,{key:0,size:15,color:"white"})):"in_progress"==e.status?(u(),c(t,{key:1,size:15,color:"white"})):(u(),c(s,{key:2,size:15,color:"white"}))]),p("span",null,f(e.title),1)]))),128))])):(u(),m("p",R," No tasks assigned to this project "))])]),p("div",W,[i[7]||(i[7]=p("h3",{class:"text-base sm:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[p("span",{class:"w-1 h-5 bg-blue-500 rounded-full shrink-0"}),w(" Timeline ")],-1)),p("ul",B,[p("li",G,[p("span",J,[i[3]||(i[3]=w("Start date: ",-1)),p("span",{class:g(["font-medium",{"text-red-600 dark:text-red-400":ue.value,"text-yellow-600 dark:text-yellow-400":ce.value,"text-gray-900 dark:text-gray-100":!ue.value&&!ce.value}])},f(k(d)(te.value.start_date)??"No start date"),3)])]),p("li",K,[p("span",L,[i[4]||(i[4]=w("End date: ",-1)),p("span",{class:g(["font-medium",{"text-red-600 dark:text-red-400":ue.value,"text-yellow-600 dark:text-yellow-400":ce.value,"text-gray-900 dark:text-gray-100":!ue.value&&!ce.value}])},f(k(d)(te.value.end_date)??"No end date"),3)])]),p("li",O,[p("span",Q,[i[5]||(i[5]=w("Created: ",-1)),p("span",V,f(k(d)(te.value.created_at)??"No created date"),1)])]),p("li",X,[p("span",Y,[i[6]||(i[6]=w("Updated: ",-1)),p("span",Z,f(k(d)(te.value.updated_at)??"No updated date"),1)])])])])]),p("div",$,[te.value&&"done"!==te.value.status?(u(),c(o,{key:0,disabled:ne.value,onClick:pe,type:"submit",bgColor:"bg-[#10b981]",hoverColor:"hover:bg-[#04bd7f]",activeColor:"active:bg-[#36bd90]",textColor:"text-white",text:"✓ Mark as Complete",class:"w-full sm:w-auto"},null,8,["disabled"])):x("",!0),v(o,{onClick:i[1]||(i[1]=e=>function(e){ae.setSelectedProjectForModal(e)}(te.value)),id:"project-edit-btn",bgColor:"bg-gray-200",hoverColor:"hover:bg-gray-100",activeColor:"active:bg-gray-300",textColor:"text-[#0c8059]",text:"Edit Project",class:"w-full sm:w-auto",type:"button"})])])):(u(),c(r,{key:1,type:"project"}));var n}}};export{ee as default};
